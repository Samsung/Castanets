<!DOCTYPE html>
<!--
Copyright 2020 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<html>
<head>
  <meta charset="utf-8">
  <style>
    video {
      background-color: black;
      max-width: 100%;
      height: auto;
    }
  </style>
</head>

<body>
  <video src="data:cast_streaming_receiver" autoplay>

  <script>
    // The Cast Streaming session must stop when the stream is no longer visible. crbug.com/1111886
    document.addEventListener('visibilitychange', function(e) {
      if (document.hidden) {
        window.close();
      }
    });

    // TODO(crbug.com/1087528): This should not be necessary. Figure out why
    // autoplay is not enough here.
    var video = document.querySelector('video');
    video.play();
  </script>
</body>
</html>
