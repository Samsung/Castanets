<html>
  <head>
  <script src="http://127.0.0.1:9559/offload.js"></script>
  <script src="../js/test.js"></script>
  </head>
  <body>
  <p>Offloaded MediaStreamTrack.stop Test</p>
  <div>
  <p>Test steps:</p>
  <ol>
    <li>Click 'Stop track' button.</li>
    <li>Test passes if the requested video is displayed and the video stream is stopped when click 'Stop track' button.</li>
  </ol>
</div>
<video id="video" autoplay controls></video>
<button id="stopTrack">Stop track</button>
<script>
  function stopStreamedVideoTrack(video) {
    const stream = video.srcObject;
    const tracks = stream.getTracks();

    tracks.forEach(function(track) {
      track.stop();
    });
  }

  document.getElementById("stopTrack").addEventListener("click", function() {
    stopStreamedVideoTrack(document.getElementById("video"));
  });

  navigator.mediaDevices.getUserMedia({video: true}).then(function (stream) {
    var video = document.getElementById("video");
    video.srcObject = stream;
  });
</script>
</body>
</html>
