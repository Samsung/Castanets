<!DOCTYPE html>
<html>
<body>
<script src="../resources/runner.js"></script>
<script>

const canvas2D = document.createElement("canvas");
var ctx2D = canvas2D.getContext("2d", { willReadFrequently: true });

function setSize(width, height) {
  canvas2D.width = width;
  canvas2D.height = height;
}

function fillCanvas(ctx2d) {
  ctx2d.fillStyle = "green";
  ctx2d.fillRect(0, 0, ctx2d.canvas.width, ctx2d.canvas.height);
}

function drawAndRepeatedGetImageDataFromCanvas2D() {
  fillCanvas(ctx2D);
  for (let i = 0; i < 10; ++i)
    ctx2D.getImageData(0, 0, canvas2D.width, canvas2D.height);
}

setSize(1024, 1024);

PerfTestRunner.measureRunsPerSecond({
  run: drawAndRepeatedGetImageDataFromCanvas2D,
  description: "This bench test checks the speed on a draw operation followed" +
  " by repeatedly calling getImageData from Canvas2D(1024x1024) if rendered" +
  " by CPU."
});

</script>
</body>
</html>
