Tests for Composed Shadow DOM Tree Traversal APIs. Can only run within DRT

On success, you will see a series of "PASS" messages, followed by "TEST COMPLETE".

ShadowRoot should be used.
Flat Tree:
#a
	#b

Traverse in forward.
#a
#b
Traverse in backward.
#b
#a

A content element should select light children
Flat Tree:
#a
	#b
	[object HTMLContentElement]

Traverse in forward.
#a
#b
[object HTMLContentElement]
Traverse in backward.
[object HTMLContentElement]
#b
#a

Test for content element selector.
Flat Tree:
#a
	#b
	[object HTMLContentElement]

Traverse in forward.
#a
#b
[object HTMLContentElement]
Traverse in backward.
[object HTMLContentElement]
#b
#a

Light children should be selected only at once.
Flat Tree:
#a
	#b
	[object HTMLContentElement]
	[object HTMLContentElement]

Traverse in forward.
#a
#b
[object HTMLContentElement]
[object HTMLContentElement]
Traverse in backward.
[object HTMLContentElement]
[object HTMLContentElement]
#b
#a

A content element can have fallback elements.
Flat Tree:
#a
	#b
	[object HTMLContentElement]
		#f1
		#f2

Traverse in forward.
#a
#b
[object HTMLContentElement]
#f1
#f2
Traverse in backward.
#f2
#f1
[object HTMLContentElement]
#b
#a

Fallback elements should not be used if a content element selects an element.
Flat Tree:
#a
	#b
	[object HTMLContentElement]
		#f1
			#f2

Traverse in forward.
#a
#b
[object HTMLContentElement]
#f1
#f2
Traverse in backward.
#f2
#f1
[object HTMLContentElement]
#b
#a

Test for traversal, starting with a fallback element which is not used.
Flat Tree:
#f1
	#f2

Traverse in forward.
#f1
#f2
Traverse in backward.
#f2
#f1

Next node of [#f1] is [#f2]
Next node of [#f2] is [[object Text]]

Test for Nested ShadowRoots.
Flat Tree:
#a
	#b
		#c
		[object HTMLContentElement]
		#d
	#f
	[object HTMLContentElement]
	#g

Traverse in forward.
#a
#b
#c
[object HTMLContentElement]
#d
#f
[object HTMLContentElement]
#g
Traverse in backward.
#g
[object HTMLContentElement]
#f
#d
[object HTMLContentElement]
#c
#b
#a

Test for inactive insertion points.
Flat Tree:
#a
	#b
		#c

Traverse in forward.
#a
#b
#c
Traverse in backward.
#c
#b
#a

Test for a content element which does not select any nodes nor have fallback elements.
Flat Tree:
#a
	[object HTMLContentElement]
	#b
	[object HTMLContentElement]
	#c
	[object HTMLContentElement]

Traverse in forward.
#a
[object HTMLContentElement]
#b
[object HTMLContentElement]
#c
[object HTMLContentElement]
Traverse in backward.
[object HTMLContentElement]
#c
[object HTMLContentElement]
#b
[object HTMLContentElement]
#a

Test for a nested insertion point.
Flat Tree:
#a
	#b
		[object HTMLContentElement]

Traverse in forward.
#a
#b
[object HTMLContentElement]
Traverse in backward.
[object HTMLContentElement]
#b
#a

Test for nested insertion points. Some of them are either empty insertion points or inactive insertion points.
Flat Tree:
#a
	[object HTMLContentElement]
	#b
		[object HTMLContentElement]
		#c
		[object HTMLContentElement]

Traverse in forward.
#a
[object HTMLContentElement]
#b
[object HTMLContentElement]
#c
[object HTMLContentElement]
Traverse in backward.
[object HTMLContentElement]
#c
[object HTMLContentElement]
#b
[object HTMLContentElement]
#a

Test for a re-projection.
Flat Tree:
#a
	#b
		[object HTMLContentElement]

Traverse in forward.
#a
#b
[object HTMLContentElement]
Traverse in backward.
[object HTMLContentElement]
#b
#a

Test for a content element which is selected by another content element.
Flat Tree:
#a
	#b
		[object HTMLContentElement]
		#most-inner-child
		[object HTMLContentElement]

Traverse in forward.
#a
#b
[object HTMLContentElement]
#most-inner-child
[object HTMLContentElement]
Traverse in backward.
[object HTMLContentElement]
#most-inner-child
[object HTMLContentElement]
#b
#a

Test for a reprojection. Content elements should be used in document order.
Flat Tree:
#a
	[object HTMLContentElement]
	#b
		[object HTMLContentElement]

Traverse in forward.
#a
[object HTMLContentElement]
#b
[object HTMLContentElement]
Traverse in backward.
[object HTMLContentElement]
#b
[object HTMLContentElement]
#a

Test for complex re-projections.
Flat Tree:
#a
	#b
		[object HTMLContentElement]
		#c

Traverse in forward.
#a
#b
[object HTMLContentElement]
#c
Traverse in backward.
#c
[object HTMLContentElement]
#b
#a

PASS successfullyParsed is true

TEST COMPLETE


