<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Tizen Wearable basic template generated by Samsung Wearable Web IDE"/>

    <title>Offload Worker</title>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery-3.5.1.slim.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <script src="js/main.js"></script>
</head>

<body class="mx-3">
  <div class="form-group">
    <label for="serverURL">Server URL</label>
    <input type="text" class="form-control" id="serverURL">
    <small class="form-text text-muted">Default server URL is location.origin</small>
  </div>
  <button id="connectBtn" type="submit" class="btn btn-primary">Connect</button>

  <button id="logClearBtn" href="#" class="btn btn-primary">Clear</button>
  <div class="card" style="overflow: auto;">
    <div class="card-body" style="padding: 0.5rem;">
      <pre id="offloadLogText" class="card-text"></pre>
    </div>
  </div>
</body>
<script src="gen/offload-worker.js"></script>
<script>
    const serverUrl = localStorage.getItem("serverURL");
    if (serverUrl) {
      document.getElementById("serverURL").defaultValue = serverUrl;
    }

    const connectBtn = document.getElementById("connectBtn");
    connectBtn.addEventListener("click", function() {
      let url = document.getElementById("serverURL").value;
      url = offloadWorker.connect(url, {forceConnect: true});
      if (url) {
        localStorage.setItem("serverURL", url);
        document.getElementById("serverURL").value = url;
      }
    });

    document.getElementById("logClearBtn").onclick = function() {
      document.getElementById("log").innerHTML = "";
    };
</script>
</html>
